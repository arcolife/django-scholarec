<!DOCTYPE html>
<html lang="en">
  <head>
    <title>ScholaRec: Recommendation Engine for Scholarly Articles</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="scholarec">
    <meta name="author" content="arcolife">
    
    <link href="/static/flatly/bootstrap.css" rel="stylesheet">
    <link href="/static/flatly/style.css" rel="stylesheet">

    <link href="/static/flatly/style.less" type="text/css" rel="stylesheet">

    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">  
    
    <script type="text/javascript" src="/static/js/jquery/jquery.min.js">
      // using jQuery
      function getCookie(name) {
      var cookieValue = null;
      if (document.cookie && document.cookie != '') {
      var cookies = document.cookie.split(';');
      for (var i = 0; i < cookies.length; i++) {
			  var cookie = jQuery.trim(cookies[i]);
			  // Does this cookie string begin with the name we want?
			  if (cookie.substring(0, name.length + 1) == (name + '=')) {
			  cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
			  break;
			  }
			  }
			  }
			  return cookieValue;
			  }
			  var csrftoken = getCookie('csrftoken');
			  
			  console.log(csrftoken);
			  </script>

    <script type="text/javascript">
      $('#example').popover({
      placement: 'right',
      title: 'Like this paper?',
      html: true,
      content: '<button class="btn"><a href="#">Like</a></button>'
      });
    </script>
    
    {% load search_tags %}
    
  </head>  
  <body>    
    <div class="navbar navbar-default">
      <ul class="breadcrumb">
	<li><a href="/">Home</a></li>
	<li class="active">Results</li>
      </ul>
      
      <div class="navbar-collapse collapse navbar-responsive-collapse">
	<ul class="nav navbar-nav">
	  <li><a class="brand pull-left" href="/"><img src="/static/img/scholarec_icon.png" height="27px" width="110px"></a></li>
	  <form action="/results/1" method="get" class="navbar-form navbar-left">
	    <input  id="search" name="q" type="text" class="form-control col-lg-8" placeholder="Search">	    
	    &nbsp;
	    <select class="multiselect" multiple="multiple" name="hair">
              <option value="Authors">Author(s)</option>
              <option value="Title">Title</option>
              <option value="Summary">Summary</option>
              <option value="Keywords">Keyword(s)</option>
              <option value="ID">ID</option>
            </select>
	  </form>
	  <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Sort By <b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li class="dropdown-header">Limit search-lookup:</li>
	      <li class="divider"></li>          
	      <li class="active"><a href="#">Relevance</a></li>
              <li><a href="#">Date</a></li>
            </ul>
	  </li>
	</ul>
	<ul class="nav navbar-nav navbar-right">
	  <li><a href="#about" data-toggle="modal">About Us</a></li>
	  <li><a href="/profile"><span class="badge">{{username}}</span></a></li>
	</ul>
      </div>
    </div>

    <div class="modal fade" id="about" >
      <div class="modal-dialog">
	<div class="modal-content">
	  <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>
            <h4 class="modal-title">About This Application</h4>
	  </div>
	  <div class="modal-body">
	    <p>
	      ScholaRec is a Recommendation Engine for Scholarly Articles<br>
	      <hr>
	      Hosted <a href="http://arcolife.github.io/scholarec">HERE</a> <br>
	    </p>
	  </div>
	  <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
	  </div>
	</div>
      </div>
    </div>

    <div class="col-lg-9">
      
      {% if items|length %}
      <small> About <b>{{ total }}</b> results ({{ took }} seconds)</small>
      {% else %}
      <div>
	Your search - <b>{{ q }}</b> - did not match any documents.
	<br /><br />
	Suggestions:
	<br />
	<ul>
	  <li>Maybe you need to append an asterix ('*') to the keyword? <br />
	    Eg: <b>nov* results in novel</b>.</li>
	  <li>Make sure that all words are spelled correctly.</li>
	  <li>Try different keywords.</li>
	  <li>Try more general keywords.</li>
	  <li>Try fewer keywords.</li>
	</ul>
      </div>
      {% endif %}
      
      <ol>
	{% for item in items %}
	<div class="jumbotron">
	  <strong><b><li>{{ item.title }}</li></b></strong>
	  <ul>
	    <li><b>Author(s):</b> {{ item.authors|join:"; " }}</li>
	    <li><b>Published:</b> {{ item.published |date:"M d, Y (D)" }}</li>
	    <li><b>ID:</b> {{ item.ID }}</li>
	  </ul>
	  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ID{{ forloop.counter }}" data-toggle="modal" class="btn btn-primary btn-sm">Preview</a>
	  {% for link in item.links %}
	  {% if link.type == 'application/pdf' %}
	  <a href="{{ link.href }}" class="btn btn-primary btn-sm">Download</a>&nbsp;
	  {% elif link.type == 'text/html' %}
	  <a href="{{ link.href }}" class="btn btn-primary btn-sm">View Original</a>
	  {% endif %}
	  {% endfor %}
	  <a href="#" id="example" class="btn btn-primary btn-sm" rel="popover"><img height="15px" src="/static/img/icon/icon-1/icon_heart.png"></a>	  
	  <a href="#" id="example" class="btn btn-primary btn-sm" rel="popover"><img height="15px" src="/static/img/icon/icon-1/icon_hearted.png"></a>
	  <br />
	  <span class="star-rating">
	    <input type="radio" name="rating" value="1"><i></i>
	    <input type="radio" name="rating" value="2"><i></i>
	    <input type="radio" name="rating" value="3"><i></i>
	    <input type="radio" name="rating" value="4"><i></i>
	    <input type="radio" name="rating" value="5"><i></i>
	  </span>	  
	  <strong class="choice">Choose a rating</strong>
	  <script type="text/javascript">
	    $(':radio').change(
	    function(){
	    $('.choice').text( this.value + ' stars' );
	    } 
	    )
	  </script>
	</div>
	
	<div class="modal fade" id="ID{{ forloop.counter }}" >
	  <div class="modal-dialog">
	    <div class="modal-content">
	      <div class="modal-header">
		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>
		<h4 class="modal-title">{{ item.title }}</h4>
	      </div>
	      <div class="modal-body">
		<p>
		  <ul>
		    <li><b>Author(s):</b> {{ item.authors |join:"; " }}</li>
		    <li><b>Summary:</b> 
		      <p class="text-info">{{ item.summary }}</p>
		    </li>
		    <li><b>Published:</b> {{ item.published |date:"M d, Y (D)"  }}</li>
		    <li><b>ID:</b> {{ item.ID }}</li>
		    <li>
		      <b>Links:</b>
		      <ol>
			{% for link in item.links %}
			<li><a href="{{link.href}}" value="link">{{ link.type }}</a></li>
			{% endfor %}
		      </ol>
		    </li>
		  </ul>
		  
		</p>
	      </div>
	      <div class="modal-footer">
		<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
	      </div>
	    </div>
	  </div>
	</div>
	
	{% endfor %}
      </ol>

      {% if total >= 10  %}
	&nbsp;&nbsp;&nbsp;&nbsp;
	<span class="label label-info" style="font-size: 86%;">Total Pages: {% get_count total items|length %}</span>
	<span class="label label-danger" style="font-size: 86%;">Page: # {{ current }}</span>
	<div>
	  <!--Div: {{ total|div:2 }}-->
	  <ul class="pagination" style="padding-left: 1em;">
	    {% if current >= 1 %}
	    <li><a href="/results/{{current|sub:'1'}}?q={{q}}">&#171;</a></li>
	    {% endif %}

	    {% for i in total|get_range %}
	    <li><a href="/results/{{i}}?q={{q}}">{{i}}</a></li>
	    {% endfor %}

	    <li><a href="/results/{{current|add:'1'}}?q={{q}}">&#187;</a></li>
	  </ul>
	</div>
	{% endif %}
	
</div>

<div class="col-lg-3">
  
  <div class="panel panel-primary">
    <div class="panel-heading">
      <h3 class="panel-title">Labels</h3>
    </div>
    <div class="panel-body">
      {% for keyword in keywords %}
      <a href="/results/1?q={{keyword}}">
	<span class="label label-{% cycle 'default' 'primary' 'success' 'warning' 'danger' 'info' %}">
	  {{ keyword }}</span>
      </a>
      {% endfor %}
    </div>
  </div>      
  
  <div class="panel panel-info">
    <div class="panel-heading">
      <h3 class="panel-title">Related Terms</h3>
    </div>
    <div class="panel-body">
      <ul class="list-group">
	<li class="list-group-item">
	  <span class="badge">14</span>
	  Keyword type 1
	</li>
	<li class="list-group-item">
	  <span class="badge">2</span>
	  Keyword type 2
	</li>
	<li class="list-group-item">
	  <span class="badge">1</span>
	  Keyword type 3
	</li>
      </ul>
    </div>
  </div>
  
  <div class="panel panel-success">
    <div class="panel-heading">
      <h3 class="panel-title">Recommendations for you</h3>
    </div>
    <div class="panel-body">
      content
    </div>
  </div> 
  
  <div class="panel-group" id="history">
    <div class="panel panel-default">
      <div class="panel-heading">
	<h3 class="panel-title">
	  <a data-toggle="collapse" data-parent="#history" href="#collapseOne">
	    Search History <span>[+]</span>
	  </a>
	</h3>
      </div>
      <div id="collapseOne" class="panel-collapse collapse">
	<div class="panel-body">
	  <ol>
	    {% for item in history reversed %}
	    <li><strong>{{ item }}</strong></li>
	    {% endfor %}
	  </ol>
	</div>
      </div>
    </div>
  </div>
  
</div>  

</body>

<!-- javascript
     ================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script type="text/javascript" src="/static/js/bootstrap/bootstrap.min.js"></script>
<!--<script src="/static/js/angular/angular.min.js"></script>
    <script src="/static/js/angular/angular-animate.min.js"></script>-->
<script src="/static/flatly/bootstrap-multiselect.js"></script>
<!-- Initialize the plugins: -->
<script type="text/javascript">
  $(document).ready(function() {
  $('.multiselect').multiselect();
  });
</script>

<script type="text/javascript">
  $(".msg_head").click(function(){
  $(this).next(".msg_body").slideToggle(100);
  })
  .toggle( function() {
  $(this).children("span").text("[+]");
  }, function() {
  $(this).children("span").text("[-]");
  });
</script>

<!--<div>
    <footer>
      &copy; ScholaRec (2014)
    </footer>
</div>-->
</html>
